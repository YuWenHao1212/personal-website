---
import { getLangFromUrl } from '../i18n/utils';

interface Props {
  name: string;
  description: string;
  href?: string;
  image?: string;
  comingSoon?: boolean;
}

const { name, description, href, image, comingSoon = false } = Astro.props;
const lang = getLangFromUrl(Astro.url);

const ctaText = lang === 'zh-TW' ? '了解更多' : 'Learn More';
const comingSoonText = lang === 'zh-TW' ? '即將推出' : 'Coming Soon';
---

<div class="bg-white border border-cream-200 rounded-xl overflow-hidden group hover:shadow-lg hover:border-accent/30 hover:-translate-y-2 transition-all duration-300 cursor-pointer">
  <div class="flex flex-col h-full">
    {image && (
      <div class="overflow-hidden">
        <img
          src={image}
          alt={name}
          class="w-full h-40 md:h-48 object-cover group-hover:scale-105 transition-transform duration-300"
          loading="lazy"
        />
      </div>
    )}

    <div class="p-5 md:p-6 flex flex-col flex-1">
      <h3 class="text-base md:text-lg font-semibold text-ink-900 mb-2 group-hover:text-accent transition-colors">
        {name}
      </h3>

      <p class="text-xs md:text-sm text-ink-500 mb-4 flex-1 leading-relaxed">
        {description}
      </p>

      {comingSoon ? (
        <span class="inline-flex items-center justify-center px-4 py-2 text-xs font-medium text-ink-500 bg-cream-200 rounded-full w-full">
          {comingSoonText}
        </span>
      ) : href ? (
        <a
          href={href}
          class="inline-flex items-center text-sm font-medium text-ink-900 group-hover:text-accent transition-colors"
          data-umami-event="product_click"
          data-umami-event-product={name}
        >
          {ctaText}
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-4 h-4 ml-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M17 8l4 4m0 0l-4 4m4-4H3"
            />
          </svg>
        </a>
      ) : null}
    </div>
  </div>
</div>
