---
import { getLangFromUrl, getAlternatePath, getAlternateLanguage } from '../i18n/utils';
import { languages, ui } from '../i18n/ui';

const currentLang = getLangFromUrl(Astro.url);
const alternateLang = getAlternateLanguage(currentLang);
const alternatePath = getAlternatePath(Astro.url);
const t = (key: keyof typeof ui['zh-TW']) => ui[currentLang][key];
---

<a
  href={alternatePath}
  class="inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-ink-600 hover:text-ink-900 hover:bg-cream-200 rounded-lg transition-colors"
  title={t('language.switch')}
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="w-4 h-4"
    fill="none"
    viewBox="0 0 24 24"
    stroke="currentColor"
    stroke-width="2"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"
    />
  </svg>
  <span>{languages[alternateLang]}</span>
</a>
