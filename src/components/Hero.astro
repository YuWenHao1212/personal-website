---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const products = lang === 'zh-TW' ? [
  {
    name: 'AI Resume Advisor',
    description: 'AI 驅動的履歷分析工具，幫助你打造更具競爭力的履歷。',
    href: '/zh-TW/products/ai-resume-advisor',
    image: '/images/products/ai-resume-advisor.webp',
    badge: '熱門',
  },
  {
    name: 'LinkedIn Resume Checker',
    description: 'Chrome Extension，一鍵分析你與 LinkedIn 職缺的匹配度。',
    href: '/zh-TW/products/linkedin-resume-checker',
    image: '/images/products/linkedin-resume-checker.webp',
    badge: '新品',
  },
] : [
  {
    name: 'AI Resume Advisor',
    description: 'AI-powered resume analysis tool that helps you craft more competitive resumes.',
    href: '/en/products/ai-resume-advisor',
    image: '/images/products/ai-resume-advisor.webp',
    badge: 'Popular',
  },
  {
    name: 'LinkedIn Resume Checker',
    description: 'Chrome Extension that analyzes your match with LinkedIn job postings in one click.',
    href: '/en/products/linkedin-resume-checker',
    image: '/images/products/linkedin-resume-checker.webp',
    badge: 'New',
  },
];

const ctaText = lang === 'zh-TW' ? '立即試用' : 'Try Now';
const productsTitle = lang === 'zh-TW' ? '我打造的產品' : 'Products I Built';
---

<section>
  <!-- Hero: Bold, editorial, warm tones -->
  <div class="min-h-[70vh] flex items-center bg-[#FAF8F5]">
    <div class="w-full max-w-6xl mx-auto px-6 py-24 md:py-32">
      <div class="grid md:grid-cols-12 gap-8 md:gap-12 items-center">
        <!-- Photo - Left column -->
        <div class="md:col-span-4 flex justify-center md:justify-start">
          <img
            src="/images/hero.webp"
            alt="WenHao Yu"
            width="280"
            height="280"
            class="w-40 h-40 md:w-56 md:h-56 lg:w-64 lg:h-64 rounded-full object-cover"
            loading="eager"
            fetchpriority="high"
            decoding="async"
          />
        </div>

        <!-- Content - Right columns -->
        <div class="md:col-span-8 text-center md:text-left">
          <!-- Overline -->
          <p class="text-sm md:text-base uppercase tracking-[0.2em] text-[#8B7355] mb-4">
            {t('hero.greeting')}
          </p>

          <!-- Main headline - Dramatic size -->
          <h1 class="text-[2.5rem] md:text-[3.5rem] lg:text-[4.5rem] font-bold text-[#2C2416] leading-[1.05] tracking-[-0.02em] mb-6">
            {t('hero.tagline')}
          </h1>

          <!-- Subtext -->
          <p class="text-lg md:text-xl text-[#5C5144] mb-10 max-w-xl leading-[1.6]">
            {t('hero.description')}
          </p>

          <!-- CTA buttons -->
          <div class="flex flex-wrap gap-4 justify-center md:justify-start">
            <a
              href={`/${lang}/about`}
              class="px-8 py-4 bg-[#2C2416] text-[#FAF8F5] text-base font-medium hover:bg-[#3D3220] transition-colors"
            >
              {t('hero.cta.story')}
            </a>
            <a
              href={`/${lang}/blog`}
              class="px-8 py-4 border-2 border-[#2C2416] text-[#2C2416] text-base font-medium hover:bg-[#2C2416] hover:text-[#FAF8F5] transition-colors"
            >
              {t('hero.cta.posts')}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Products Section - Grid layout, warm -->
  <div class="bg-[#F5F1EB] py-24 md:py-32">
    <div class="max-w-6xl mx-auto px-6">
      <!-- Section header - Left aligned, bold -->
      <div class="mb-16 md:mb-20">
        <h2 class="text-[2rem] md:text-[2.5rem] lg:text-[3rem] font-bold text-[#2C2416] leading-[1.1] tracking-[-0.02em]">
          {productsTitle}
        </h2>
      </div>

      <!-- Product cards -->
      <div class="grid md:grid-cols-2 gap-8 md:gap-10">
        {products.map((product) => (
          <a
            href={product.href}
            class="group block bg-white border border-cream-200 rounded-xl overflow-hidden cursor-pointer hover:shadow-lg hover:border-accent/30 hover:-translate-y-2 transition-all duration-300"
            data-umami-event="hero_product_click"
            data-umami-event-product={product.name}
          >
            <!-- Product Image -->
            <div class="relative overflow-hidden aspect-[16/10]">
              <img
                src={product.image}
                alt={product.name}
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                loading="eager"
              />
              <!-- Badge -->
              <span class="absolute top-3 left-3 px-2.5 py-1 text-xs font-medium bg-accent text-white rounded-full shadow-sm">
                {product.badge}
              </span>
            </div>

            <!-- Content -->
            <div class="p-5 md:p-6">
              <h3 class="text-base md:text-lg font-semibold text-ink-900 mb-2 group-hover:text-accent transition-colors">
                {product.name}
              </h3>
              <p class="text-xs md:text-sm text-ink-500 mb-4 leading-relaxed">
                {product.description}
              </p>
              <!-- CTA -->
              <span class="inline-flex items-center text-sm font-medium text-ink-900 group-hover:text-accent transition-colors">
                {ctaText}
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </span>
            </div>
          </a>
        ))}
      </div>
    </div>
  </div>
</section>
