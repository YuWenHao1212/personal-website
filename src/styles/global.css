/*
 * Editorial Minimalism Typography System
 * - Newsreader: English headings (editorial character)
 * - Noto Serif TC: Chinese headings (elegant, cultural)
 * - Satoshi: English body (warmer, approachable)
 * - Noto Sans TC: Chinese body (clean, modern)
 * - JetBrains Mono: Code blocks
 *
 * Fonts are loaded via <link> in BaseLayout.astro for better performance
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply bg-cream-100 text-ink-900 font-sans antialiased;
    font-feature-settings: 'liga' 1;
  }

  /* Editorial serif headings - distinctive character */
  h1, h2, h3, h4, h5, h6 {
    @apply font-serif font-semibold;
    letter-spacing: -0.02em;
  }

  h1 {
    @apply text-3xl md:text-4xl lg:text-5xl leading-tight;
  }

  h2 {
    @apply text-2xl md:text-3xl leading-snug;
  }

  h3 {
    @apply text-xl md:text-2xl;
  }

  h4 {
    @apply text-lg md:text-xl;
  }

  /* Links use teal - complementary to amber accent */
  a {
    @apply transition-colors duration-200;
  }

  /* Selection color matches brand */
  ::selection {
    @apply bg-accent-light text-ink-900;
  }
}

@layer components {
  .container-narrow {
    @apply max-w-4xl mx-auto px-4 sm:px-6;
  }

  .container-wide {
    @apply max-w-6xl mx-auto px-4 sm:px-6;
  }

  .container-prose {
    @apply max-w-3xl mx-auto px-4 sm:px-6;
  }

  /* Primary button - warm amber accent, pill shape */
  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-full font-medium transition-all duration-200;
  }

  .btn-primary {
    @apply btn bg-accent text-white shadow-sm;
    @apply hover:bg-accent-hover hover:shadow-lg hover:scale-105;
  }

  .btn-secondary {
    @apply btn bg-cream-300 text-ink-800;
    @apply hover:bg-cream-400 hover:shadow-md hover:scale-105;
  }

  .btn-outline {
    @apply btn border-2 border-accent text-accent;
    @apply hover:bg-accent hover:text-white hover:shadow-md hover:scale-105;
  }

  /* Links use teal color */
  .link {
    @apply text-link font-medium hover:text-link-hover hover:underline;
  }

  /* Card with subtle warmth + lift animation */
  .card {
    @apply bg-white rounded-xl p-6 shadow-sm border border-cream-200 cursor-pointer;
    @apply transition-all duration-300 hover:shadow-lg hover:-translate-y-2 hover:border-accent/30;
  }

  /* Editorial quote style */
  .pullquote {
    @apply font-serif text-xl md:text-2xl text-ink-700 border-l-4 border-accent pl-6 py-2 my-8;
  }

  /* Figure with caption - centered */
  figure {
    @apply my-6;
  }

  figure img {
    @apply w-full rounded-lg;
  }

  figcaption {
    @apply text-center text-sm text-ink-600 mt-2 italic;
  }

  /* Figure floating left - for inline layout */
  figure.float-left {
    float: left;
    margin-right: 1.5rem;
    margin-bottom: 1rem;
    margin-top: 0.25rem;
    width: 12rem;
  }

  @media (min-width: 640px) {
    figure.float-left {
      width: 14rem;
    }
  }

  @media (min-width: 768px) {
    figure.float-left {
      width: 16rem;
    }
  }

  figure.float-left img {
    @apply w-full;
  }

  figure.float-left figcaption {
    text-align: left;
    font-size: 0.75rem;
  }

  /* List items next to float should align properly */
  figure.float-left + p + ul,
  figure.float-left + p + ol,
  figure.float-left + p + p + ul,
  figure.float-left + p + p + ol {
    list-style-position: inside;
  }

  /* Clear float after section */
  .clear-float {
    clear: both;
  }

  /* Section divider */
  .divider {
    @apply border-t border-cream-300 my-12;
  }

  /* Subtle highlight for key text */
  .highlight {
    @apply bg-accent-light px-1 rounded;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Scroll animation utilities */
  .fade-in-section {
    @apply opacity-0 translate-y-6;
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .fade-in-section.visible {
    @apply opacity-100 translate-y-0;
  }

  /* Staggered children animation */
  .stagger-children > * {
    @apply opacity-0 translate-y-4;
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
  }

  .stagger-children.visible > *:nth-child(1) { transition-delay: 0ms; @apply opacity-100 translate-y-0; }
  .stagger-children.visible > *:nth-child(2) { transition-delay: 100ms; @apply opacity-100 translate-y-0; }
  .stagger-children.visible > *:nth-child(3) { transition-delay: 200ms; @apply opacity-100 translate-y-0; }
  .stagger-children.visible > *:nth-child(4) { transition-delay: 300ms; @apply opacity-100 translate-y-0; }
  .stagger-children.visible > *:nth-child(5) { transition-delay: 400ms; @apply opacity-100 translate-y-0; }
  .stagger-children.visible > *:nth-child(6) { transition-delay: 500ms; @apply opacity-100 translate-y-0; }
}

/* Respect user preference for reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .fade-in-section,
  .stagger-children > * {
    opacity: 1 !important;
    transform: none !important;
  }
}
